tinymce.util.Tools.resolve("tinymce.PluginManager").add("formula",function(t,e){return(t.getParam("formula")||{}).path,t.addCommand("tinyMCEFormula",function(){var a,n,i,o,r,m;let l=(a=t,n=e,i=a.selection.getNode(),o=a.getParam("language")||"en",r="",m="","img"==i.nodeName.toLowerCase()&&i.className.indexOf("fm-editor-equation")>-1&&(i.getAttribute("data-mlang")&&(r="&mlang="+i.getAttribute("data-mlang")),i.getAttribute("data-equation")&&(m="&equation="+i.getAttribute("data-equation"))),'<iframe style="width: 100%; min-width: 100%; height: 500px; min-height: 100%;" name="tinymceFormula" id="tinymceFormula" src="'+n+"/index.html?lang="+o+r+m+'" scrolling="no" frameborder="0"></iframe>');t.windowManager.open({title:"Formula",size:"large",body:{type:"panel",items:[{type:"htmlpanel",html:l,name:"formula"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Insert Formula",primary:!0}],onSubmit:function(e){window.EditorObj.getEquationPng((a,n,i)=>{a&&t.insertContent('<img class="fm-editor-equation" src="'+a+'" data-mlang="'+n+'" data-equation="'+encodeURIComponent(i)+'"/>'),e.close()})}})}),t.ui.registry.addButton("formula",{icon:"insert-character",tooltip:"Insert Formula",onAction:function(){t.execCommand("tinyMCEFormula")}}),t.ui.registry.addMenuItem("formula",{icon:"insert-character",text:"Insert Formula",onAction:function(){t.execCommand("tinyMCEFormula")}}),{}});
